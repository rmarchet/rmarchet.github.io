import{r as C,j as F,e as dt}from"./react-B2MP_kRR.js";import{W as vt,R as ht,O as mt,P as bt,S as gt,a as he,V as yt,b as wt,B as jt,C as Ct,L as Et,c as Ye,N as Ze,A as Pt,d as Ae,e as Mt,f as St,U as xt,g as se,h as Oe,i as Rt,T as Ot,H as Tt}from"./three-BhR9ud7Z.js";import{j as It}from"./react-use-measure-9yo6gGM-.js";import{c as At,x as kt,i as _t,m as Ft}from"./its-fine-BaoiJ6Fa.js";import{c as ae,R as Dt}from"./react-reconciler-DwF3unMS.js";import{s as ke}from"./scheduler-DV1PgV85.js";import"./react-dom-BkK_s-8w.js";import{_ as Lt}from"./@babel-CF3RwP-h.js";import{O as Ht}from"./three-stdlib-BuZqK12t.js";import{E as Bt,R as Nt,N as zt,D as Ut,a as _e,b as qt,P as Gt,B as Xt}from"./postprocessing-3619mF8q.js";import{c as Vt}from"./zustand-qjm6-URX.js";function Je(e){let t=e.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const Ke=e=>e&&e.isOrthographicCamera,Wt=e=>e&&e.hasOwnProperty("current"),Yt=e=>e!=null&&(typeof e=="string"||typeof e=="number"||e.isColor),ne=((e,t)=>typeof window<"u"&&(((e=window.document)==null?void 0:e.createElement)||((t=window.navigator)==null?void 0:t.product)==="ReactNative"))()?C.useLayoutEffect:C.useEffect;function Qe(e){const t=C.useRef(e);return ne(()=>void(t.current=e),[e]),t}function Zt(){const e=At(),t=kt();return C.useMemo(()=>({children:n})=>{const o=!!_t(e,!0,s=>s.type===C.StrictMode)?C.StrictMode:C.Fragment;return F.jsx(o,{children:F.jsx(t,{children:n})})},[e,t])}function Jt({set:e}){return ne(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}const Kt=(e=>(e=class extends C.Component{constructor(...n){super(...n),this.state={error:!1}}componentDidCatch(n){this.props.set(n)}render(){return this.state.error?null:this.props.children}},e.getDerivedStateFromError=()=>({error:!0}),e))();function $e(e){var t;const n=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}function Y(e){var t;return(t=e.__r3f)==null?void 0:t.root.getState()}const A={obj:e=>e===Object(e)&&!A.arr(e)&&typeof e!="function",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",boo:e=>typeof e=="boolean",und:e=>e===void 0,nul:e=>e===null,arr:e=>Array.isArray(e),equ(e,t,{arrays:n="shallow",objects:r="reference",strict:o=!0}={}){if(typeof e!=typeof t||!!e!=!!t)return!1;if(A.str(e)||A.num(e)||A.boo(e))return e===t;const s=A.obj(e);if(s&&r==="reference")return e===t;const p=A.arr(e);if(p&&n==="reference")return e===t;if((p||s)&&e===t)return!0;let l;for(l in e)if(!(l in t))return!1;if(s&&n==="shallow"&&r==="shallow"){for(l in o?t:e)if(!A.equ(e[l],t[l],{strict:o,objects:"reference"}))return!1}else for(l in o?t:e)if(e[l]!==t[l])return!1;if(A.und(l)){if(p&&e.length===0&&t.length===0||s&&Object.keys(e).length===0&&Object.keys(t).length===0)return!0;if(e!==t)return!1}return!0}};function Qt(e){e.type!=="Scene"&&(e.dispose==null||e.dispose());for(const t in e){const n=e[t];(n==null?void 0:n.type)!=="Scene"&&(n==null||n.dispose==null||n.dispose())}}const et=["children","key","ref"];function $t(e){const t={};for(const n in e)et.includes(n)||(t[n]=e[n]);return t}function le(e,t,n,r){const o=e;let s=o==null?void 0:o.__r3f;return s||(s={root:t,type:n,parent:null,children:[],props:$t(r),object:o,eventCount:0,handlers:{},isHidden:!1},o&&(o.__r3f=s)),s}function te(e,t){let n=e[t];if(!t.includes("-"))return{root:e,key:t,target:n};n=e;for(const o of t.split("-")){var r;t=o,e=n,n=(r=n)==null?void 0:r[t]}return{root:e,key:t,target:n}}const Fe=/-\d+$/;function fe(e,t){if(A.str(t.props.attach)){if(Fe.test(t.props.attach)){const o=t.props.attach.replace(Fe,""),{root:s,key:p}=te(e.object,o);Array.isArray(s[p])||(s[p]=[])}const{root:n,key:r}=te(e.object,t.props.attach);t.previousAttach=n[r],n[r]=t.object}else A.fun(t.props.attach)&&(t.previousAttach=t.props.attach(e.object,t.object))}function ue(e,t){if(A.str(t.props.attach)){const{root:n,key:r}=te(e.object,t.props.attach),o=t.previousAttach;o===void 0?delete n[r]:n[r]=o}else t.previousAttach==null||t.previousAttach(e.object,t.object);delete t.previousAttach}const Ee=[...et,"args","dispose","attach","object","onUpdate","dispose"],De=new Map;function en(e){let t=De.get(e.constructor);try{t||(t=new e.constructor,De.set(e.constructor,t))}catch{}return t}function tn(e,t){const n={};for(const r in t)if(!Ee.includes(r)&&!A.equ(t[r],e.props[r])){n[r]=t[r];for(const o in t)o.startsWith(`${r}-`)&&(n[o]=t[o])}for(const r in e.props){if(Ee.includes(r)||t.hasOwnProperty(r))continue;const{root:o,key:s}=te(e.object,r);if(o.constructor&&o.constructor.length===0){const p=en(o);A.und(p)||(n[s]=p[s])}else n[s]=0}return n}const nn=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],rn=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function G(e,t){var n;const r=e.__r3f,o=r&&Je(r).getState(),s=r==null?void 0:r.eventCount;for(const l in t){let i=t[l];if(Ee.includes(l))continue;if(r&&rn.test(l)){typeof i=="function"?r.handlers[l]=i:delete r.handlers[l],r.eventCount=Object.keys(r.handlers).length;continue}if(i===void 0)continue;let{root:d,key:c,target:f}=te(e,l);if(f instanceof Ae&&i instanceof Ae)f.mask=i.mask;else if(f instanceof Mt&&Yt(i))f.set(i);else if(f!==null&&typeof f=="object"&&typeof f.set=="function"&&typeof f.copy=="function"&&i!=null&&i.constructor&&f.constructor===i.constructor)f.copy(i);else if(f!==null&&typeof f=="object"&&typeof f.set=="function"&&Array.isArray(i))typeof f.fromArray=="function"?f.fromArray(i):f.set(...i);else if(f!==null&&typeof f=="object"&&typeof f.set=="function"&&typeof i=="number")typeof f.setScalar=="function"?f.setScalar(i):f.set(i);else{var p;d[c]=i,o&&!o.linear&&nn.includes(c)&&(p=d[c])!=null&&p.isTexture&&d[c].format===St&&d[c].type===xt&&(d[c].colorSpace=Ye)}}if(r!=null&&r.parent&&o!=null&&o.internal&&(n=r.object)!=null&&n.isObject3D&&s!==r.eventCount){const l=r.object,i=o.internal.interaction.indexOf(l);i>-1&&o.internal.interaction.splice(i,1),r.eventCount&&l.raycast!==null&&o.internal.interaction.push(l)}return r&&r.props.attach===void 0&&(r.object.isBufferGeometry?r.props.attach="geometry":r.object.isMaterial&&(r.props.attach="material")),r&&Q(r),e}function Q(e){var t;if(!e.parent)return;e.props.onUpdate==null||e.props.onUpdate(e.object);const n=(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function on(e,t){e.manual||(Ke(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix())}const L=e=>e==null?void 0:e.isObject3D;function oe(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function tt(e,t,n,r){const o=n.get(t);o&&(n.delete(t),n.size===0&&(e.delete(r),o.target.releasePointerCapture(r)))}function sn(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter(r=>r!==t),n.initialHits=n.initialHits.filter(r=>r!==t),n.hovered.forEach((r,o)=>{(r.eventObject===t||r.object===t)&&n.hovered.delete(o)}),n.capturedMap.forEach((r,o)=>{tt(n.capturedMap,t,r,o)})}function an(e){function t(i){const{internal:d}=e.getState(),c=i.offsetX-d.initialClick[0],f=i.offsetY-d.initialClick[1];return Math.round(Math.sqrt(c*c+f*f))}function n(i){return i.filter(d=>["Move","Over","Enter","Out","Leave"].some(c=>{var f;return(f=d.__r3f)==null?void 0:f.handlers["onPointer"+c]}))}function r(i,d){const c=e.getState(),f=new Set,g=[],v=d?d(c.internal.interaction):c.internal.interaction;for(let u=0;u<v.length;u++){const a=Y(v[u]);a&&(a.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(i,c);function R(u){const a=Y(u);if(!a||!a.events.enabled||a.raycaster.camera===null)return[];if(a.raycaster.camera===void 0){var h;a.events.compute==null||a.events.compute(i,a,(h=a.previousRoot)==null?void 0:h.getState()),a.raycaster.camera===void 0&&(a.raycaster.camera=null)}return a.raycaster.camera?a.raycaster.intersectObject(u,!0):[]}let O=v.flatMap(R).sort((u,a)=>{const h=Y(u.object),w=Y(a.object);return!h||!w?u.distance-a.distance:w.events.priority-h.events.priority||u.distance-a.distance}).filter(u=>{const a=oe(u);return f.has(a)?!1:(f.add(a),!0)});c.events.filter&&(O=c.events.filter(O,c));for(const u of O){let a=u.object;for(;a;){var S;(S=a.__r3f)!=null&&S.eventCount&&g.push({...u,eventObject:a}),a=a.parent}}if("pointerId"in i&&c.internal.capturedMap.has(i.pointerId))for(let u of c.internal.capturedMap.get(i.pointerId).values())f.has(oe(u.intersection))||g.push(u.intersection);return g}function o(i,d,c,f){if(i.length){const g={stopped:!1};for(const v of i){let R=Y(v.object);if(R||v.object.traverseAncestors(O=>{const S=Y(O);if(S)return R=S,!1}),R){const{raycaster:O,pointer:S,camera:u,internal:a}=R,h=new se(S.x,S.y,0).unproject(u),w=y=>{var E,M;return(E=(M=a.capturedMap.get(y))==null?void 0:M.has(v.eventObject))!=null?E:!1},m=y=>{const E={intersection:v,target:d.target};a.capturedMap.has(y)?a.capturedMap.get(y).set(v.eventObject,E):a.capturedMap.set(y,new Map([[v.eventObject,E]])),d.target.setPointerCapture(y)},b=y=>{const E=a.capturedMap.get(y);E&&tt(a.capturedMap,v.eventObject,E,y)};let T={};for(let y in d){let E=d[y];typeof E!="function"&&(T[y]=E)}let P={...v,...T,pointer:S,intersections:i,stopped:g.stopped,delta:c,unprojectedPoint:h,ray:O.ray,camera:u,stopPropagation(){const y="pointerId"in d&&a.capturedMap.get(d.pointerId);if((!y||y.has(v.eventObject))&&(P.stopped=g.stopped=!0,a.hovered.size&&Array.from(a.hovered.values()).find(E=>E.eventObject===v.eventObject))){const E=i.slice(0,i.indexOf(v));s([...E,v])}},target:{hasPointerCapture:w,setPointerCapture:m,releasePointerCapture:b},currentTarget:{hasPointerCapture:w,setPointerCapture:m,releasePointerCapture:b},nativeEvent:d};if(f(P),g.stopped===!0)break}}}return i}function s(i){const{internal:d}=e.getState();for(const c of d.hovered.values())if(!i.length||!i.find(f=>f.object===c.object&&f.index===c.index&&f.instanceId===c.instanceId)){const g=c.eventObject.__r3f;if(d.hovered.delete(oe(c)),g!=null&&g.eventCount){const v=g.handlers,R={...c,intersections:i};v.onPointerOut==null||v.onPointerOut(R),v.onPointerLeave==null||v.onPointerLeave(R)}}}function p(i,d){for(let c=0;c<d.length;c++){const f=d[c].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(i)}}function l(i){switch(i){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return d=>{const{internal:c}=e.getState();"pointerId"in d&&c.capturedMap.has(d.pointerId)&&requestAnimationFrame(()=>{c.capturedMap.has(d.pointerId)&&(c.capturedMap.delete(d.pointerId),s([]))})}}return function(c){const{onPointerMissed:f,internal:g}=e.getState();g.lastEvent.current=c;const v=i==="onPointerMove",R=i==="onClick"||i==="onContextMenu"||i==="onDoubleClick",S=r(c,v?n:void 0),u=R?t(c):0;i==="onPointerDown"&&(g.initialClick=[c.offsetX,c.offsetY],g.initialHits=S.map(h=>h.eventObject)),R&&!S.length&&u<=2&&(p(c,g.interaction),f&&f(c)),v&&s(S);function a(h){const w=h.eventObject,m=w.__r3f;if(!(m!=null&&m.eventCount))return;const b=m.handlers;if(v){if(b.onPointerOver||b.onPointerEnter||b.onPointerOut||b.onPointerLeave){const T=oe(h),P=g.hovered.get(T);P?P.stopped&&h.stopPropagation():(g.hovered.set(T,h),b.onPointerOver==null||b.onPointerOver(h),b.onPointerEnter==null||b.onPointerEnter(h))}b.onPointerMove==null||b.onPointerMove(h)}else{const T=b[i];T?(!R||g.initialHits.includes(w))&&(p(c,g.interaction.filter(P=>!g.initialHits.includes(P))),T(h)):R&&g.initialHits.includes(w)&&p(c,g.interaction.filter(P=>!g.initialHits.includes(P)))}}o(S,c,u,a)}}return{handlePointer:l}}const Le=e=>!!(e!=null&&e.render),nt=C.createContext(null),cn=(e,t)=>{const n=Vt((l,i)=>{const d=new se,c=new se,f=new se;function g(u=i().camera,a=c,h=i().size){const{width:w,height:m,top:b,left:T}=h,P=w/m;a.isVector3?f.copy(a):f.set(...a);const y=u.getWorldPosition(d).distanceTo(f);if(Ke(u))return{width:w/u.zoom,height:m/u.zoom,top:b,left:T,factor:1,distance:y,aspect:P};{const E=u.fov*Math.PI/180,M=2*Math.tan(E/2)*y,D=M*(w/m);return{width:D,height:M,top:b,left:T,factor:w/D,distance:y,aspect:P}}}let v;const R=u=>l(a=>({performance:{...a.performance,current:u}})),O=new Oe;return{set:l,get:i,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(u=1)=>e(i(),u),advance:(u,a)=>t(u,a,i()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Rt,pointer:O,mouse:O,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const u=i();v&&clearTimeout(v),u.performance.current!==u.performance.min&&R(u.performance.min),v=setTimeout(()=>R(i().performance.max),u.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:g},setEvents:u=>l(a=>({...a,events:{...a.events,...u}})),setSize:(u,a,h=0,w=0)=>{const m=i().camera,b={width:u,height:a,top:h,left:w};l(T=>({size:b,viewport:{...T.viewport,...g(m,c,b)}}))},setDpr:u=>l(a=>{const h=$e(u);return{viewport:{...a.viewport,dpr:h,initialDpr:a.viewport.initialDpr||h}}}),setFrameloop:(u="always")=>{const a=i().clock;a.stop(),a.elapsedTime=0,u!=="never"&&(a.start(),a.elapsedTime=0),l(()=>({frameloop:u}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:C.createRef(),active:!1,frames:0,priority:0,subscribe:(u,a,h)=>{const w=i().internal;return w.priority=w.priority+(a>0?1:0),w.subscribers.push({ref:u,priority:a,store:h}),w.subscribers=w.subscribers.sort((m,b)=>m.priority-b.priority),()=>{const m=i().internal;m!=null&&m.subscribers&&(m.priority=m.priority-(a>0?1:0),m.subscribers=m.subscribers.filter(b=>b.ref!==u))}}}}}),r=n.getState();let o=r.size,s=r.viewport.dpr,p=r.camera;return n.subscribe(()=>{const{camera:l,size:i,viewport:d,gl:c,set:f}=n.getState();if(i.width!==o.width||i.height!==o.height||d.dpr!==s){o=i,s=d.dpr,on(l,i),d.dpr>0&&c.setPixelRatio(d.dpr);const g=typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(i.width,i.height,g)}l!==p&&(p=l,f(g=>({viewport:{...g.viewport,...g.viewport.getCurrentViewport(l)}})))}),n.subscribe(l=>e(l)),n};function rt(){const e=C.useContext(nt);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function z(e=n=>n,t){return rt()(e,t)}function ot(e,t=0){const n=rt(),r=n.getState().internal.subscribe,o=Qe(e);return ne(()=>r(o,t,n),[t,r,n]),null}function ln(e){const t=Dt(e);return t.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:C.version}),t}const it=0,K={},fn=/^three(?=[A-Z])/,de=e=>`${e[0].toUpperCase()}${e.slice(1)}`;let un=0;const pn=e=>typeof e=="function";function st(e){if(pn(e)){const t=`${un++}`;return K[t]=e,t}else Object.assign(K,e)}function at(e,t){const n=de(e),r=K[n];if(e!=="primitive"&&!r)throw new Error(`R3F: ${n} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(e==="primitive"&&!t.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(t.args!==void 0&&!Array.isArray(t.args))throw new Error("R3F: The args prop must be an array!")}function dn(e,t,n){var r;return e=de(e)in K?e:e.replace(fn,""),at(e,t),e==="primitive"&&(r=t.object)!=null&&r.__r3f&&delete t.object.__r3f,le(t.object,n,e,t)}function vn(e){if(!e.isHidden){var t;e.props.attach&&(t=e.parent)!=null&&t.object?ue(e.parent,e):L(e.object)&&(e.object.visible=!1),e.isHidden=!0,Q(e)}}function ct(e){if(e.isHidden){var t;e.props.attach&&(t=e.parent)!=null&&t.object?fe(e.parent,e):L(e.object)&&e.props.visible!==!1&&(e.object.visible=!0),e.isHidden=!1,Q(e)}}function Te(e,t,n){const r=t.root.getState();if(!(!e.parent&&e.object!==r.scene)){if(!t.object){var o,s;const p=K[de(t.type)];t.object=(o=t.props.object)!=null?o:new p(...(s=t.props.args)!=null?s:[]),t.object.__r3f=t}if(G(t.object,t.props),t.props.attach)fe(e,t);else if(L(t.object)&&L(e.object)){const p=e.object.children.indexOf(n==null?void 0:n.object);if(n&&p!==-1){const l=e.object.children.indexOf(t.object);if(l!==-1){e.object.children.splice(l,1);const i=l<p?p-1:p;e.object.children.splice(i,0,t.object)}else t.object.parent=e.object,e.object.children.splice(p,0,t.object),t.object.dispatchEvent({type:"added"}),e.object.dispatchEvent({type:"childadded",child:t.object})}else e.object.add(t.object)}for(const p of t.children)Te(t,p);Q(t)}}function me(e,t){t&&(t.parent=e,e.children.push(t),Te(e,t))}function He(e,t,n){if(!t||!n)return;t.parent=e;const r=e.children.indexOf(n);r!==-1?e.children.splice(r,0,t):e.children.push(t),Te(e,t,n)}function lt(e){if(typeof e.dispose=="function"){const t=()=>{try{e.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?t():ke.unstable_scheduleCallback(ke.unstable_IdlePriority,t)}}function Pe(e,t,n){if(!t)return;t.parent=null;const r=e.children.indexOf(t);r!==-1&&e.children.splice(r,1),t.props.attach?ue(e,t):L(t.object)&&L(e.object)&&(e.object.remove(t.object),sn(Je(t),t.object));const o=t.props.dispose!==null&&n!==!1;for(let s=t.children.length-1;s>=0;s--){const p=t.children[s];Pe(t,p,o)}t.children.length=0,delete t.object.__r3f,o&&t.type!=="primitive"&&t.object.type!=="Scene"&&lt(t.object),n===void 0&&Q(t)}function hn(e,t){for(const n of[e,e.alternate])if(n!==null)if(typeof n.ref=="function"){n.refCleanup==null||n.refCleanup();const r=n.ref(t);typeof r=="function"&&(n.refCleanup=r)}else n.ref&&(n.ref.current=t)}const ce=[];function mn(){for(const[n]of ce){const r=n.parent;if(r){n.props.attach?ue(r,n):L(n.object)&&L(r.object)&&r.object.remove(n.object);for(const o of n.children)o.props.attach?ue(n,o):L(o.object)&&L(n.object)&&n.object.remove(o.object)}n.isHidden&&ct(n),n.object.__r3f&&delete n.object.__r3f,n.type!=="primitive"&&lt(n.object)}for(const[n,r,o]of ce){n.props=r;const s=n.parent;if(s){var e,t;const p=K[de(n.type)];n.object=(e=n.props.object)!=null?e:new p(...(t=n.props.args)!=null?t:[]),n.object.__r3f=n,hn(o,n.object),G(n.object,n.props),n.props.attach?fe(s,n):L(n.object)&&L(s.object)&&s.object.add(n.object);for(const l of n.children)l.props.attach?fe(n,l):L(l.object)&&L(n.object)&&n.object.add(l.object);Q(n)}}ce.length=0}const be=()=>{},Be={};let ie=it;const bn=0,gn=4,Me=ln({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:dn,removeChild:Pe,appendChild:me,appendInitialChild:me,insertBefore:He,appendChildToContainer(e,t){const n=e.getState().scene.__r3f;!t||!n||me(n,t)},removeChildFromContainer(e,t){const n=e.getState().scene.__r3f;!t||!n||Pe(n,t)},insertInContainerBefore(e,t,n){const r=e.getState().scene.__r3f;!t||!n||!r||He(r,t,n)},getRootHostContext:()=>Be,getChildHostContext:()=>Be,commitUpdate(e,t,n,r,o){var s,p,l;at(t,r);let i=!1;if((e.type==="primitive"&&n.object!==r.object||((s=r.args)==null?void 0:s.length)!==((p=n.args)==null?void 0:p.length)||(l=r.args)!=null&&l.some((c,f)=>{var g;return c!==((g=n.args)==null?void 0:g[f])}))&&(i=!0),i)ce.push([e,{...r},o]);else{const c=tn(e,r);Object.keys(c).length&&(Object.assign(e.props,c),G(e.object,c))}(o.sibling===null||(o.flags&gn)===bn)&&mn()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:e=>e==null?void 0:e.object,prepareForCommit:()=>null,preparePortalMount:e=>le(e.getState().scene,e,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:vn,unhideInstance:ct,createTextInstance:be,hideTextInstance:be,unhideTextInstance:be,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:C.createContext(null),setCurrentUpdatePriority(e){ie=e},getCurrentUpdatePriority(){return ie},resolveUpdatePriority(){var e;if(ie!==it)return ie;switch(typeof window<"u"&&((e=window.event)==null?void 0:e.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return ae.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return ae.ContinuousEventPriority;default:return ae.DefaultEventPriority}},resetFormInstance(){}}),W=new Map,Z={objects:"shallow",strict:!1};function yn(e,t){if(!t&&typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:n,height:r,top:o,left:s}=e.parentElement.getBoundingClientRect();return{width:n,height:r,top:o,left:s}}else if(!t&&typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas)return{width:e.width,height:e.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...t}}function wn(e){const t=W.get(e),n=t==null?void 0:t.fiber,r=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const o=typeof reportError=="function"?reportError:console.error,s=r||cn(Re,ze),p=n||Me.createContainer(s,ae.ConcurrentRoot,null,!1,null,"",o,o,o,null);t||W.set(e,{fiber:p,store:s});let l,i,d=!1,c=null;return{async configure(f={}){let g;c=new Promise(x=>g=x);let{gl:v,size:R,scene:O,events:S,onCreated:u,shadows:a=!1,linear:h=!1,flat:w=!1,legacy:m=!1,orthographic:b=!1,frameloop:T="always",dpr:P=[1,2],performance:y,raycaster:E,camera:M,onPointerMissed:D}=f,j=s.getState(),I=j.gl;if(!j.gl){const x={canvas:e,powerPreference:"high-performance",antialias:!0,alpha:!0},k=typeof v=="function"?await v(x):v;Le(k)?I=k:I=new vt({...x,...v}),j.set({gl:I})}let H=j.raycaster;H||j.set({raycaster:H=new ht});const{params:U,...X}=E||{};if(A.equ(X,H,Z)||G(H,{...X}),A.equ(U,H.params,Z)||G(H,{params:{...H.params,...U}}),!j.camera||j.camera===i&&!A.equ(i,M,Z)){i=M;const x=M==null?void 0:M.isCamera,k=x?M:b?new mt(0,0,0,0,.1,1e3):new bt(75,0,.1,1e3);x||(k.position.z=5,M&&(G(k,M),k.manual||("aspect"in M||"left"in M||"right"in M||"bottom"in M||"top"in M)&&(k.manual=!0,k.updateProjectionMatrix())),!j.camera&&!(M!=null&&M.rotation)&&k.lookAt(0,0,0)),j.set({camera:k}),H.camera=k}if(!j.scene){let x;O!=null&&O.isScene?(x=O,le(x,s,"",{})):(x=new gt,le(x,s,"",{}),O&&G(x,O)),j.set({scene:x})}S&&!j.events.handlers&&j.set({events:S(s)});const V=yn(e,R);if(A.equ(V,j.size,Z)||j.setSize(V.width,V.height,V.top,V.left),P&&j.viewport.dpr!==$e(P)&&j.setDpr(P),j.frameloop!==T&&j.setFrameloop(T),j.onPointerMissed||j.set({onPointerMissed:D}),y&&!A.equ(y,j.performance,Z)&&j.set(x=>({performance:{...x.performance,...y}})),!j.xr){var q;const x=(_,ve)=>{const Ie=s.getState();Ie.frameloop!=="never"&&ze(_,!0,Ie,ve)},k=()=>{const _=s.getState();_.gl.xr.enabled=_.gl.xr.isPresenting,_.gl.xr.setAnimationLoop(_.gl.xr.isPresenting?x:null),_.gl.xr.isPresenting||Re(_)},N={connect(){const _=s.getState().gl;_.xr.addEventListener("sessionstart",k),_.xr.addEventListener("sessionend",k)},disconnect(){const _=s.getState().gl;_.xr.removeEventListener("sessionstart",k),_.xr.removeEventListener("sessionend",k)}};typeof((q=I.xr)==null?void 0:q.addEventListener)=="function"&&N.connect(),j.set({xr:N})}if(I.shadowMap){const x=I.shadowMap.enabled,k=I.shadowMap.type;if(I.shadowMap.enabled=!!a,A.boo(a))I.shadowMap.type=he;else if(A.str(a)){var re;const N={basic:jt,percentage:wt,soft:he,variance:yt};I.shadowMap.type=(re=N[a])!=null?re:he}else A.obj(a)&&Object.assign(I.shadowMap,a);(x!==I.shadowMap.enabled||k!==I.shadowMap.type)&&(I.shadowMap.needsUpdate=!0)}return Ct.enabled=!m,d||(I.outputColorSpace=h?Et:Ye,I.toneMapping=w?Ze:Pt),j.legacy!==m&&j.set(()=>({legacy:m})),j.linear!==h&&j.set(()=>({linear:h})),j.flat!==w&&j.set(()=>({flat:w})),v&&!A.fun(v)&&!Le(v)&&!A.equ(v,I,Z)&&G(I,v),l=u,d=!0,g(),this},render(f){return!d&&!c&&this.configure(),c.then(()=>{Me.updateContainer(F.jsx(jn,{store:s,children:f,onCreated:l,rootElement:e}),p,null,()=>{})}),s},unmount(){ft(e)}}}function jn({store:e,children:t,onCreated:n,rootElement:r}){return ne(()=>{const o=e.getState();o.set(s=>({internal:{...s.internal,active:!0}})),n&&n(o),e.getState().events.connected||o.events.connect==null||o.events.connect(r)},[]),F.jsx(nt.Provider,{value:e,children:t})}function ft(e,t){const n=W.get(e),r=n==null?void 0:n.fiber;if(r){const o=n==null?void 0:n.store.getState();o&&(o.internal.active=!1),Me.updateContainer(null,r,null,()=>{o&&setTimeout(()=>{try{var s,p,l,i;o.events.disconnect==null||o.events.disconnect(),(s=o.gl)==null||(p=s.renderLists)==null||p.dispose==null||p.dispose(),(l=o.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(i=o.gl)!=null&&i.xr&&o.xr.disconnect(),Qt(o.scene),W.delete(e)}catch{}},500)})}}const Cn=new Set,En=new Set,Pn=new Set;function ge(e,t){if(e.size)for(const{callback:n}of e.values())n(t)}function $(e,t){switch(e){case"before":return ge(Cn,t);case"after":return ge(En,t);case"tail":return ge(Pn,t)}}let ye,we;function Se(e,t,n){let r=t.clock.getDelta();t.frameloop==="never"&&typeof e=="number"&&(r=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),ye=t.internal.subscribers;for(let o=0;o<ye.length;o++)we=ye[o],we.ref.current(we.store.getState(),r,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}let pe=!1,xe=!1,je,Ne,J;function ut(e){Ne=requestAnimationFrame(ut),pe=!0,je=0,$("before",e),xe=!0;for(const n of W.values()){var t;J=n.store.getState(),J.internal.active&&(J.frameloop==="always"||J.internal.frames>0)&&!((t=J.gl.xr)!=null&&t.isPresenting)&&(je+=Se(e,J))}if(xe=!1,$("after",e),je===0)return $("tail",e),pe=!1,cancelAnimationFrame(Ne)}function Re(e,t=1){var n;if(!e)return W.forEach(r=>Re(r.store.getState(),t));(n=e.gl.xr)!=null&&n.isPresenting||!e.internal.active||e.frameloop==="never"||(t>1?e.internal.frames=Math.min(60,e.internal.frames+t):xe?e.internal.frames=2:e.internal.frames=1,pe||(pe=!0,requestAnimationFrame(ut)))}function ze(e,t=!0,n,r){if(t&&$("before",e),n)Se(e,n,r);else for(const o of W.values())Se(e,o.store.getState());t&&$("after",e)}const Ce={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Mn(e){const{handlePointer:t}=an(e);return{priority:1,enabled:!0,compute(n,r,o){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(Ce).reduce((n,r)=>({...n,[r]:t(r)}),{}),update:()=>{var n;const{events:r,internal:o}=e.getState();(n=o.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(o.lastEvent.current)},connect:n=>{const{set:r,events:o}=e.getState();if(o.disconnect==null||o.disconnect(),r(s=>({events:{...s.events,connected:n}})),o.handlers)for(const s in o.handlers){const p=o.handlers[s],[l,i]=Ce[s];n.addEventListener(l,p,{passive:i})}},disconnect:()=>{const{set:n,events:r}=e.getState();if(r.connected){if(r.handlers)for(const o in r.handlers){const s=r.handlers[o],[p]=Ce[o];r.connected.removeEventListener(p,s)}n(o=>({events:{...o.events,connected:void 0}}))}}}}function Sn({ref:e,children:t,fallback:n,resize:r,style:o,gl:s,events:p=Mn,eventSource:l,eventPrefix:i,shadows:d,linear:c,flat:f,legacy:g,orthographic:v,frameloop:R,dpr:O,performance:S,raycaster:u,camera:a,scene:h,onPointerMissed:w,onCreated:m,...b}){C.useMemo(()=>st(Ot),[]);const T=Zt(),[P,y]=It({scroll:!0,debounce:{scroll:50,resize:0},...r}),E=C.useRef(null),M=C.useRef(null);C.useImperativeHandle(e,()=>E.current);const D=Qe(w),[j,I]=C.useState(!1),[H,U]=C.useState(!1);if(j)throw j;if(H)throw H;const X=C.useRef(null);ne(()=>{const q=E.current;if(y.width>0&&y.height>0&&q){X.current||(X.current=wn(q));async function re(){await X.current.configure({gl:s,scene:h,events:p,shadows:d,linear:c,flat:f,legacy:g,orthographic:v,frameloop:R,dpr:O,performance:S,raycaster:u,camera:a,size:y,onPointerMissed:(...x)=>D.current==null?void 0:D.current(...x),onCreated:x=>{x.events.connect==null||x.events.connect(l?Wt(l)?l.current:l:M.current),i&&x.setEvents({compute:(k,N)=>{const _=k[i+"X"],ve=k[i+"Y"];N.pointer.set(_/N.size.width*2-1,-(ve/N.size.height)*2+1),N.raycaster.setFromCamera(N.pointer,N.camera)}}),m==null||m(x)}}),X.current.render(F.jsx(T,{children:F.jsx(Kt,{set:U,children:F.jsx(C.Suspense,{fallback:F.jsx(Jt,{set:I}),children:t??null})})}))}re()}}),C.useEffect(()=>{const q=E.current;if(q)return()=>ft(q)},[]);const V=l?"none":"auto";return F.jsx("div",{ref:M,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:V,...o},...b,children:F.jsx("div",{ref:P,style:{width:"100%",height:"100%"},children:F.jsx("canvas",{ref:E,style:{display:"block"},children:n})})})}function Vn(e){return F.jsx(Ft,{children:F.jsx(Sn,{...e})})}const Wn=C.forwardRef(({makeDefault:e,camera:t,regress:n,domElement:r,enableDamping:o=!0,keyEvents:s=!1,onChange:p,onStart:l,onEnd:i,...d},c)=>{const f=z(b=>b.invalidate),g=z(b=>b.camera),v=z(b=>b.gl),R=z(b=>b.events),O=z(b=>b.setEvents),S=z(b=>b.set),u=z(b=>b.get),a=z(b=>b.performance),h=t||g,w=r||R.connected||v.domElement,m=C.useMemo(()=>new Ht(h),[h]);return ot(()=>{m.enabled&&m.update()},-1),C.useEffect(()=>(s&&m.connect(s===!0?w:s),m.connect(w),()=>void m.dispose()),[s,w,n,m,f]),C.useEffect(()=>{const b=y=>{f(),n&&a.regress(),p&&p(y)},T=y=>{l&&l(y)},P=y=>{i&&i(y)};return m.addEventListener("change",b),m.addEventListener("start",T),m.addEventListener("end",P),()=>{m.removeEventListener("start",T),m.removeEventListener("end",P),m.removeEventListener("change",b)}},[p,l,i,m,f,O]),C.useEffect(()=>{if(e){const b=u().controls;return S({controls:m}),()=>S({controls:b})}},[e,m]),C.createElement("primitive",Lt({ref:c,object:m,enableDamping:o},d))});function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}new Oe;new Oe;function pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var B=function e(t,n,r){var o=this;pt(this,e),ee(this,"dot2",function(s,p){return o.x*s+o.y*p}),ee(this,"dot3",function(s,p,l){return o.x*s+o.y*p+o.z*l}),this.x=t,this.y=n,this.z=r},xn=[new B(1,1,0),new B(-1,1,0),new B(1,-1,0),new B(-1,-1,0),new B(1,0,1),new B(-1,0,1),new B(1,0,-1),new B(-1,0,-1),new B(0,1,1),new B(0,-1,1),new B(0,1,-1),new B(0,-1,-1)],Ue=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],qe=new Array(512),Ge=new Array(512),Rn=function(t){t>0&&t<1&&(t*=65536),t=Math.floor(t),t<256&&(t|=t<<8);for(var n=0;n<256;n++){var r;n&1?r=Ue[n]^t&255:r=Ue[n]^t>>8&255,qe[n]=qe[n+256]=r,Ge[n]=Ge[n+256]=xn[r%12]}};Rn(0);function On(e){if(typeof e=="number")e=Math.abs(e);else if(typeof e=="string"){var t=e;e=0;for(var n=0;n<t.length;n++)e=(e+(n+1)*(t.charCodeAt(n)%96))%2147483647}return e===0&&(e=311),e}function Xe(e){var t=On(e);return function(){var n=t*48271%2147483647;return t=n,n/2147483647}}var Tn=function e(t){var n=this;pt(this,e),ee(this,"seed",0),ee(this,"init",function(r){n.seed=r,n.value=Xe(r)}),ee(this,"value",Xe(this.seed)),this.init(t)};new Tn(Math.random());const In=C.createContext(null),Ve=e=>(e.getAttributes()&2)===2,Yn=C.memo(C.forwardRef(({children:e,camera:t,scene:n,resolutionScale:r,enabled:o=!0,renderPriority:s=1,autoClear:p=!0,depthBuffer:l,enableNormalPass:i,stencilBuffer:d,multisampling:c=8,frameBufferType:f=Tt},g)=>{const{gl:v,scene:R,camera:O,size:S}=z(),u=n||R,a=t||O,[h,w,m]=C.useMemo(()=>{const P=new Bt(v,{depthBuffer:l,stencilBuffer:d,multisampling:c,frameBufferType:f});P.addPass(new Nt(u,a));let y=null,E=null;return i&&(E=new zt(u,a),E.enabled=!1,P.addPass(E),r!==void 0&&(y=new Ut({normalBuffer:E.texture,resolutionScale:r}),y.enabled=!1,P.addPass(y))),[P,E,y]},[a,v,l,d,c,f,u,i,r]);C.useEffect(()=>h==null?void 0:h.setSize(S.width,S.height),[h,S]),ot((P,y)=>{if(o){const E=v.autoClear;v.autoClear=p,d&&!p&&v.clearStencil(),h.render(y),v.autoClear=E}},o?s:0);const b=C.useRef(null);C.useLayoutEffect(()=>{var E;const P=[],y=b.current.__r3f;if(y&&h){const M=y.children;for(let D=0;D<M.length;D++){const j=M[D].object;if(j instanceof _e){const I=[j];if(!Ve(j)){let U=null;for(;(U=(E=M[D+1])==null?void 0:E.object)instanceof _e&&!Ve(U);)I.push(U),D++}const H=new qt(a,...I);P.push(H)}else j instanceof Gt&&P.push(j)}for(const D of P)h==null||h.addPass(D);w&&(w.enabled=!0),m&&(m.enabled=!0)}return()=>{for(const M of P)h==null||h.removePass(M);w&&(w.enabled=!1),m&&(m.enabled=!1)}},[h,e,a,w,m]),C.useEffect(()=>{const P=v.toneMapping;return v.toneMapping=Ze,()=>{v.toneMapping=P}},[v]);const T=C.useMemo(()=>({composer:h,normalPass:w,downSamplingPass:m,resolutionScale:r,camera:a,scene:u}),[h,w,m,r,a,u]);return C.useImperativeHandle(g,()=>h,[h]),F.jsx(In.Provider,{value:T,children:F.jsx("group",{ref:b,children:e})})}));let An=0;const We=new WeakMap,kn=(e,t)=>function({blendFunction:n=t==null?void 0:t.blendFunction,opacity:r=t==null?void 0:t.opacity,...o}){let s=We.get(e);if(!s){const i=`@react-three/postprocessing/${e.name}-${An++}`;st({[i]:e}),We.set(e,s=i)}const p=z(i=>i.camera),l=dt.useMemo(()=>[...(t==null?void 0:t.args)??[],...o.args??[{...t,...o}]],[JSON.stringify(o)]);return F.jsx(s,{camera:p,"blendMode-blendFunction":n,"blendMode-opacity-value":r,...o,args:l})},Zn=kn(Xt,{blendFunction:0});export{Vn as C,Wn as O,ot as a,Yn as d,z as u,Zn as w};
